<div class="container">
<h2><%= @space.name %></h2>
<%# TODO: Add 'has_photo' to space model %>
<% if !user_signed_in? || current_user.id != @space.user_id %>
<div class="d-flex">
<% if @space.photo.blank? %>
  <img src="https://www.cnet.com/a/img/LLg84fdggU-EGFI2bUQ7Sd0IpxE=/940x528/2017/10/20/e8f232cc-25eb-4fa8-a11f-e4e1941fed8d/vr-zone-shinjuku-007.jpg" alt="VR Zone">
<% else %>
  <%= cl_image_tag @space.photo.key, height: 300, width: 400, crop: :fill %>
<% end %>

  <%# <img src="https://www.cnet.com/a/img/LLg84fdggU-EGFI2bUQ7Sd0IpxE=/940x528/2017/10/20/e8f232cc-25eb-4fa8-a11f-e4e1941fed8d/vr-zone-shinjuku-007.jpg" alt="VR Zone"> %>
  <div class="m-4">
    <h2>Book your next session now</h2>
    <%= simple_form_for [ @space, @booking ] do |f| %>

      <%= f.date_field :booking_date, min: Date.today%>
      <%= f.input :booking_start_time, as: :time, :minute_step => 30%>
      <%= f.input :booking_end_time, as: :time, :minute_step => 15%>
      <%= f.submit "Send a Booking request", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>
<% else %>
  <% if @space.photo.blank? %>
    <img src="https://www.cnet.com/a/img/LLg84fdggU-EGFI2bUQ7Sd0IpxE=/940x528/2017/10/20/e8f232cc-25eb-4fa8-a11f-e4e1941fed8d/vr-zone-shinjuku-007.jpg" alt="VR Zone">
  <% else %>
    <%= cl_image_tag @space.photo.key, height: 300, width: 400, crop: :fill %>
  <% end %>
<% end %>
<p><strong><%= @space.location %></strong></p>
<%# TODO: Add 'overview' to space model %>


<h2>Description</h2>
<h4>Supported VR headset: <%= @space.vr_headset %></h4>
<h4>Price per hour: <%= @space.hourly_rate %></h4>
<hr>

<p>
<%= @space.overview %>
</p>
<h2>Games supported</h2>

<p>
<%= @space.games %>
</p>
<hr>


<h2>Latest reviews</h2>

<% @space.bookings.each do |booking| %>

  <% booking.reviews.each do |review| %>
    <p>
      <% stars = review.rating %>
      <% stars.times do  %>
      <i class="fa-solid fa-star"></i>
      <% end %>
    </p>
    <p><%= review.content %></p>
    <p>written by <%= review.space.user.email %></p>
    <% end %>

<% end %>
</div>
